var G;if(typeof window=="undefined"){G=GLOBAL}else{G=window}(function(){var L;var E;var B;var X=256;var M=257;var ap=258;var V=259;var R=260;var p=false;var l=null;var H=null;var Y=null;function am(){if(H==null){H=window.open("","yaccdiag","resizable,status,width=600,height=400");Y=null}if(Y==null){Y=H.document}Y.open()}function ab(v){if(Y==null){am()}Y.write(v+"<br>")}function ao(){if(Y!=null){Y.close();Y=null;H=null}}var f=[0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,2,8,8,6,8,8,8,8,4,5,8,8,8,8,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,1,3,8,8,8];var t=8;var d=261;var b=8;var af=5;var ag=[17,1,0,5,6,2,3,0,0,14];var y=10;var m=[3,4,0,6,3,2,7,-1,-1,5];var aa=[-3,-3,-3,-3,4,1,1,2,3,-1,3,0,0,0,0,3];var W=5;var D=[32767,32767,32767,32767,32767,32767,8,32767,2,32767,4];var ac=[4,16,10,18];var J=4;var I=[3,3,3,4];var an=[0,0,0,-1,-3];var c=[-32768,7,12,8,9];var aj=[0,1,2,3,3,3,3,4,4];var al=[1,1,1,3,4,3,1,2,1];var S=16;var g=11;var x=1;var r=32767;var U=-32766;function h(){var v=new Array();var F=new Array();yystate=0;yychar=-1;yysp=0;F[yysp]=0;yyerrflag=0;for(;;){if(aa[yystate]==0){yyn=D[yystate]}else{if(yychar<0){if((yychar=ah())<=0){yychar=0}yychar=yychar<d?f[yychar]:t}if(((yyn=aa[yystate]+yychar)>=0&&yyn<y&&m[yyn]==yychar||(yystate<W&&(yyn=aa[yystate+g]+yychar)>=0&&yyn<y&&m[yyn]==yychar))&&(yyn=ag[yyn])!=U){if(yyn>0){yysp++;F[yysp]=yystate=yyn;v[yysp]=l;yychar=-1;if(yyerrflag>0){yyerrflag--}if(yyn<g){continue}yyn-=g}else{yyn=-yyn}}else{yyn=D[yystate]}}for(;;){if(yyn==0){ao();return 0}else{if(yyn!=r){yyl=al[yyn];yyval=v[yysp-yyl+1];switch(yyn){case 2:ak=v[yysp-(1-1)];break;case 3:yyval=v[yysp-(3-2)];break;case 4:yyval=i(v[yysp-(4-2)],v[yysp-(4-4)]);break;case 5:yyval=new ad(v[yysp-(3-1)],v[yysp-(3-3)]);break;case 6:yyval=new j(v[yysp-(1-1)]);break;case 7:yyval=(v[yysp-(2-1)]+v[yysp-(2-2)]);break;case 8:yyval=v[yysp-(1-1)];break}yysp-=yyl;yyn=aj[yyn];if((yyp=an[yyn]+F[yysp])>=0&&yyp<J&&I[yyp]==yyn){yystate=ac[yyp]}else{yystate=c[yyn]}yysp++;F[yysp]=yystate;v[yysp]=yyval}else{switch(yyerrflag){case 0:u("syntax error");case 1:case 2:yyerrflag=3;while(!((yyn=aa[yystate]+x)>=0&&yyn<y&&m[yyn]==x||(yystate<W&&(yyn=aa[yystate+g]+x)>=0&&yyn<y&&m[yyn]==x))){if(yysp<=0){ao();return 1}yystate=F[--yysp]}yyn=ag[yyn];F[++yysp]=yystate=yyn;break;case 3:if(yychar==0){ao();return 1}yychar=-1;break}}}if(yystate<g){break}yyn=yystate-g}}}function O(v,ar){var F=[];for(var aq=0;aq<v.length;aq++){F.push(ar(v[aq],aq))}return F}function j(v){this.name=v;this.solve=function(){return G.lambdaSimplify(this)};this.str=function(){return k(this)};this.real_str=function(){return this.name};this.removeGensym=function(){if(this.name[0]=="%"){this.name=C[this.name]}return this}}function ae(v){return new j(v)}function w(v,F){this.arg=v;this.expr=F;this.str=function(){return k(this)};this.real_str=function(){return"(λ"+this.arg+"."+this.expr.real_str()+")"};this.solve=function(){return G.lambdaSimplify(this)};this.removeGensym=function(){if(this.arg[0]=="%"){this.arg=C[this.arg]}this.expr=this.expr.removeGensym();return this}}function s(v,F){return new w(v,F)}function ad(F,v){this.expr1=F;this.expr2=v;this.solve=function(){return G.lambdaSimplify(this)};this.str=function(){return k(this)};this.real_str=function(){return"("+this.expr1.real_str()+" "+this.expr2.real_str()+")"};this.removeGensym=function(){this.expr1=this.expr1.removeGensym();this.expr2=this.expr2.removeGensym();return this}}function e(F,v){return new ad(F,v)}var N=0;var C={};function Z(v){N++;if(v[0]=="%"){C["%"+N]=C[v]}else{C["%"+N]=v}return"%"+N}function K(at,ay,aw){if(aw instanceof j){var av=aw.name;return(ay==av)?at:new j(av)}else{if(aw instanceof w){var av=aw.arg;var v=aw.expr;var ax=Z(av);var ar=K(new j(ax),av,v);var F=K(at,ay,ar);return new w(ax,F)}else{if(aw instanceof ad){var v=aw.expr1;var au=aw.expr2;var aq=K(at,ay,v);var F=K(at,ay,au);return new ad(aq,F)}}}}function T(v){if(v instanceof j){return[]}else{if(v instanceof w){var ay=v.arg;var ax=v.expr;var F=O(T(ax),function(az){return new w(ay,az)});return F}else{if(v instanceof ad){var av=v.expr1;var au=v.expr2;var aw;if(av instanceof w){var ay=av.arg;var ax=av.expr;var at=K(au,ay,ax);aw=[at]}else{aw=[]}var ar=O(T(av),function(az){return new ad(az,au)});var aq=O(T(au),function(az){return new ad(av,az)});return aw.concat(ar).concat(aq)}}}}function Q(F){var v=T(F);if(v.length==0){return F.removeGensym()}else{return Q(v[0])}}G.Var=j;G.v=ae;G.Abs=w;G.F=s;G.App=ad;G.app=e;G.gensymMap=C;G.lambdaSimplify=Q;function A(F){var v=P[F];if(v==null){throw new Error("'"+F+"' is not defined")}else{return v}}function i(F,v){var at=F.split("").reverse();var av=v;var aq=null;for(var ar=0;ar<at.length;ar++){var au=at[ar];aq=new w(au,av);av=aq}return aq}function k(at){var v=at.real_str();for(var aq=0;aq<n.length;aq++){var F=n[aq];var ar=P[F];if(at.constructor.name==ar.constructor.name&&v==ar.real_str()){return F}}return v}var E;var L;var o;var P={};var n=[];var ak=null;function q(v){return"abcdefghijklmnopqrstuvwxyz".indexOf(v)>-1}function ai(v){return"ABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789".indexOf(v)>-1}function ah(){l=null;while(L!=""&&(L.charAt(0)=="\n"||L.charAt(0)=="\t")){E=L.substr(0,1);L=L.substr(1)}var v=L.charAt(0);if(L.length==0){return 0}else{if(q(v)){E=v;L=L.substr(1);l=E;return M}else{if(ai(v)){E=v;L=L.substr(1);l=E;return V}else{E=L.substr(0,1);L=L.substr(1);return E.charCodeAt(0)}}}}function u(v){throw new Error(v)}function z(F,v){return a(F,v,null)}function a(ax,v,F){var ar=v||{};var az=[];if(F==null){n=[];P={}}if(v!=null){for(var aq in ar){az.push(aq)}for(var at=0;at<az.length;at++){var ay=az[at];P[ay]=a(ar[ay],null,"no-reset")}n=az}for(var at=0;at<n.length;at++){var ay=n[at];ax=ax.split(ay).join(ar[ay])}var ax=ax.split("λ").join("#");ax=ax.replace(/\)\(/g,") (");ax=ax.replace(/([a-z])\(/g,"$1 (");ax=ax.replace(/\)([a-z])/g,") $1");var aA="";var av="";var au="";for(var at=0;at<ax.length;at++){var aw=ax[at];if(aw=="#"){av="param";au="";aA+=aw}else{if(/[a-z]/.test(aw)){if(av=="param"){au="";aA+=aw}else{if(au!=""){aA=aA.slice(0,-1);aA+=(au+" ")}au=aw;aA+=aw}}else{av="";au="";aA+=aw}}}ax=aA;L=ax;h();return ak}G.parseLambda=z;G.L=z;G.lambda=z})();